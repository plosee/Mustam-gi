[gd_scene load_steps=20 format=3 uid="uid://cplfwex3fof48"]

[ext_resource type="Texture2D" uid="uid://d0kam32aaify" path="res://Images/hdri.png" id="1_4a62p"]
[ext_resource type="Texture2D" uid="uid://chpi73wnvokhj" path="res://Images/dead-grass.jpg" id="2_m8qti"]
[ext_resource type="PackedScene" uid="uid://bu6ql3rpnuvic" path="res://Scenes/Player.tscn" id="2_nffhn"]
[ext_resource type="PackedScene" uid="uid://cm3hmpodt6rqa" path="res://Scenes/Models/kubik.tscn" id="3_ev8i3"]
[ext_resource type="PackedScene" uid="uid://c73wlf43av6jg" path="res://Scenes/Models/syringe.tscn" id="4_xsx6c"]
[ext_resource type="Script" path="res://Scripts/syringe.gd" id="5_mblc2"]
[ext_resource type="PackedScene" uid="uid://c8p17wce755dp" path="res://Scenes/Models/knife.tscn" id="7_mesgh"]
[ext_resource type="Script" path="res://Scripts/knife.gd" id="8_1kl28"]
[ext_resource type="PackedScene" uid="uid://b3xvijimtypng" path="res://Scenes/Models/JakeAnimated.tscn" id="9_i81fm"]
[ext_resource type="PackedScene" uid="uid://b5rnwvqy4hngy" path="res://Scenes/Settings.tscn" id="9_js3a7"]
[ext_resource type="Script" path="res://Scenes/Models/JakeAnimated.gd" id="10_vykvs"]
[ext_resource type="PackedScene" uid="uid://078hmwvxjwvn" path="res://Scenes/Models/viin.tscn" id="11_ysmsv"]
[ext_resource type="Script" path="res://Scripts/Viin.gd" id="12_xnl2j"]
[ext_resource type="PackedScene" uid="uid://dxpucvx2ykihp" path="res://Scenes/Models/viin new.tscn" id="13_32j2u"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_bokw3"]
panorama = ExtResource("1_4a62p")

[sub_resource type="Sky" id="Sky_lr7tk"]
sky_material = SubResource("PanoramaSkyMaterial_bokw3")

[sub_resource type="Environment" id="Environment_1s8ko"]
background_mode = 2
sky = SubResource("Sky_lr7tk")
fog_light_color = Color(0.517647, 0.552941, 0.607843, 1)
fog_density = 0.0
fog_sky_affect = 0.77

[sub_resource type="BoxShape3D" id="BoxShape3D_3drt7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yty0u"]
albedo_texture = ExtResource("2_m8qti")
uv1_scale = Vector3(-100, -100, -100)

[node name="World" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.970393, -0.222925, -0.0929574, 0.086185, -0.679125, 0.728945, -0.22563, 0.699352, 0.678232, 6.0052, 4.38704, -7.20322)
light_color = Color(0.666667, 0.537255, 0, 1)
shadow_enabled = true
shadow_bias = 0.0
shadow_normal_bias = 2.833
shadow_blur = 0.583
directional_shadow_mode = 0
directional_shadow_fade_start = 0.744
directional_shadow_max_distance = 11.9
directional_shadow_pancake_size = 1.5

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1s8ko")

[node name="ground" type="StaticBody3D" parent="."]
transform = Transform3D(20, 0, 0, 0, 1, 0, 0, 0, 20, 0, -0.517428, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="ground"]
transform = Transform3D(20, 0, 0, 0, 1, 0, 0, 0, 20, 0, 0, 0)
visible = false
shape = SubResource("BoxShape3D_3drt7")

[node name="CSGBox3D" type="CSGBox3D" parent="ground"]
size = Vector3(100, 2, 100)
material = SubResource("StandardMaterial3D_yty0u")

[node name="Character" parent="." instance=ExtResource("2_nffhn")]

[node name="Camera3D" parent="Character/CharacterBody3D/Head" index="0"]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, 0, 0, 0)
rotation_order = 1

[node name="crosshair" parent="Character/CharacterBody3D/Head/Camera3D/InteractRay" index="0"]
mouse_filter = 2

[node name="vasak" parent="Character/CharacterBody3D/Head/arms/RootNode" index="1"]
transform = Transform3D(-1.25929, -8.55838e-07, 3.08676e-07, 0, 3.21316, 3.60605, -1.90148e-07, 5.66796, -2.04427, -0.411036, 2.86214, -0.420944)

[node name="AnimationPlayer" parent="Character/CharacterBody3D/Head/arms/RootNode/vasak" index="0"]
speed_scale = 2.0

[node name="Itempickup" parent="Character/CharacterBody3D/Head/arms/RootNode/inventory" index="5"]
visible = false
offset_bottom = 126.0

[node name="Interactables" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0461006, 9.53674e-07, -0.107237)

[node name="syringe" parent="Interactables" instance=ExtResource("4_xsx6c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.27814, -7.48561)
script = ExtResource("5_mblc2")

[node name="kubik2" parent="Interactables" instance=ExtResource("3_ev8i3")]
transform = Transform3D(0.0259876, 0, 0, 0, 0.369867, 0, 0, 0, 0.507515, 9.00319, 2.05769, -4.64443)

[node name="kubik" parent="Interactables" instance=ExtResource("3_ev8i3")]
transform = Transform3D(0.108393, 0, 0, 0, 0.162887, 0, 0, 0, 0.116701, 6.74229, 1.76947, 0.127717)

[node name="knife" parent="Interactables" instance=ExtResource("7_mesgh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.72221, 9.31348)
script = ExtResource("8_1kl28")

[node name="NPC" type="Node3D" parent="Interactables"]

[node name="JakePaul" parent="Interactables/NPC" instance=ExtResource("9_i81fm")]
transform = Transform3D(0.997733, 0, -0.0673012, 0, 1, 0, 0.0673012, 0, 0.997733, 4.2641, 0.578739, -6.17024)
script = ExtResource("10_vykvs")

[node name="viin test" parent="Interactables" instance=ExtResource("11_ysmsv")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -2.48382, 1.62137, -6.69888)
script = ExtResource("12_xnl2j")

[node name="viin" parent="Interactables" instance=ExtResource("13_32j2u")]
transform = Transform3D(0.335932, 0, 0.497141, 0, 0.4, 0, -0.497141, 0, 0.335932, -4.09992, 3, -6.09717)

[node name="SettingsNode" parent="." instance=ExtResource("9_js3a7")]
visible = false

[connection signal="NPC" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Interactables/NPC/JakePaul" method="_on_interact_ray_npc"]
[connection signal="Viin" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Interactables/viin test" method="_on_interact_ray_viin"]
[connection signal="knife" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Interactables/knife" method="_on_interact_ray_knife"]
[connection signal="kubikinteract" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Interactables/kubik" method="_on_interact_ray_kubikinteract"]
[connection signal="kubikrefill" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Character/CharacterBody3D/Head/arms/RootNode/vasak/kubikhand" method="_on_interact_ray_kubikrefill"]
[connection signal="syringe" from="Character/CharacterBody3D/Head/Camera3D/InteractRay" to="Interactables/syringe" method="_on_interact_ray_syringe"]
[connection signal="animation_finished" from="Character/CharacterBody3D/Head/arms/RootNode/vasak/AnimationPlayer" to="Character" method="_on_animation_player_animation_finished"]
[connection signal="pause" from="Character/CharacterBody3D/Head/arms/RootNode/inventory" to="SettingsNode" method="_on_inventory_pause"]

[editable path="Character"]
[editable path="Interactables/syringe"]
[editable path="Interactables/kubik2"]
[editable path="Interactables/kubik"]
[editable path="Interactables/knife"]
